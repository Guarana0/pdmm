{% extends 'base.html' %}
{% load static %}

{% block title %}{{ foto.titulo }} - Galeria{% endblock %}
{% block description %}{{ foto.descricao|default:"Foto da galeria do Portal do Modernismo Mineiro"|truncatewords:20 }}{% endblock %}
{% block keywords %}galeria, foto, {{ foto.titulo }}, {{ foto.local }}, modernismo mineiro{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 dark:bg-gray-900">
  <div class="container mx-auto px-4 py-8">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <div class="lg:col-span-2">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden">
          {% if foto.imagem %}
            <img 
              src="{{ foto.imagem.url }}" 
              alt="{{ foto.titulo }}" 
              class="w-full h-auto object-cover" 
              style="max-height: 70vh;"
            />
          {% else %}
            <div class="w-full h-96 bg-gray-200 dark:bg-gray-700 flex items-center justify-center">
              <div class="text-center">
                <svg class="w-20 h-20 mx-auto text-gray-400 mb-4" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path>
                </svg>
                <p class="text-gray-500 dark:text-gray-400">Imagem não disponível</p>
              </div>
            </div>
          {% endif %}
        </div>
      </div>

      <div class="space-y-6">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6">
            <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-4 font-montserrat">{{ foto.titulo }}</h1>
          <div class="space-y-3">
            {% if foto.local %}
              <div class="flex items-center text-gray-600 dark:text-gray-300">
                <svg class="w-5 h-5 mr-3 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                </svg>
                <span class="font-medium">Local:</span>
                <span class="ml-2">{{ foto.local }}</span>
              </div>
            {% endif %}
            {% if foto.ano %}
              <div class="flex items-center text-gray-600 dark:text-gray-300">
                <svg class="w-5 h-5 mr-3 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
                </svg>
                <span class="font-medium">Ano:</span>
                <span class="ml-2">{{ foto.ano }}</span>
              </div>
            {% endif %}
            <div class="flex items-center text-gray-600 dark:text-gray-300">
              <svg class="w-5 h-5 mr-3 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm3 1h6v4H7V5zm8 8v2H5v-2h10z" clip-rule="evenodd"></path>
              </svg>
              <span class="font-medium">Adicionado em:</span>
              <span class="ml-2">{{ foto.data_cadastro|date:"d/m/Y" }}</span>
            </div>
          </div>
        </div>

        {% if foto.descricao %}
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6">
            <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center">
              <svg class="w-6 h-6 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
              </svg>
              Descrição
            </h2>
            <div class="prose prose-gray dark:prose-invert max-w-none">
              <p class="text-gray-700 dark:text-gray-300 leading-relaxed font-ptsans">{{ foto.descricao|linebreaks }}</p>
            </div>
          </div>
        {% endif %}

        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6">
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center">
            <svg class="w-6 h-6 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
            </svg>
            Ações
          </h2>
          <div class="space-y-3">
            {% if foto.imagem %}
              <a 
                href="{{ foto.imagem.url }}" 
                target="_blank" 
                class="inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 w-full justify-center"
              >
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                </svg>
                Ver em tamanho original
              </a>
            {% endif %}
          </div>
        </div>

        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6">
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center">
            <svg class="w-6 h-6 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            Explorar Galeria
          </h2>
          <a
            href="{% url 'core:galeria' %}"
            class="inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200 w-full justify-center"
          >
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
            </svg>
            Ver todas as fotos
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function compartilhar() {
  if (navigator.share) {
    navigator.share({
      title: '{{ foto.titulo|escapejs }}',
      text: '{{ foto.descricao|default:"Confira esta foto da galeria"|escapejs|truncatewords:10 }}',
      url: window.location.href
    });
  } else {
    // Fallback: copiar URL para clipboard
    navigator.clipboard.writeText(window.location.href).then(function() {
      alert('URL copiada para a área de transferência!');
    });
  }
}

// Adicionar navegação por teclado
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    history.back();
  }
});
</script>

<style>
.prose p {
  margin-bottom: 1rem;
}

@media (max-width: 1024px) {
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }
}

/* Animações suaves */
.transition-all {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 300ms;
}

/* Hover effects para cards */
.bg-white:hover, .dark .bg-gray-800:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* Loading spinner para imagens */
img {
  transition: opacity 0.3s ease;
}

img[src=""] {
  opacity: 0;
}
</style>
{% endblock %}